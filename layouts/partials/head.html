{{ $description := .Site.Params.Header }}
{{ if .Description }}
{{ $description = trim .Description "\n " }}
{{ end -}}

{{ $title := .Site.Title }}
{{ if .IsPage }}
{{ $title = .Title }}
{{ end -}}


<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ $description }}">
  <meta name="robots" content="all,follow">

  {{ if isset .Site.Params "twitter" }}
  <meta name="twitter:title" content="{{ $title }}">
  <meta name="twitter:site" content="@{{ . }}"/>
  <meta name="twitter:creator" content="{{ .Site.Params.twitter }}">
  <meta name="twitter:description" content="{{ $description }}">

  {{ if .Params.featured_image }}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="{{ .Params.featured_image | absURL }}">
  {{ else }}
  <meta name="twitter:card" content="summary">
  {{ end }}
  {{ end }}

  <meta name="og:description" content="{{ $description }}">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:title" content="{{ $title }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:site_name" content="{{ .Site.Title }}">

  {{ if .Params.featured_image }}
  <meta property="og:image" content="{{ .Params.featured_image | absURL }}">
  <meta property="og:image:secure_url" content="{{ .Params.featured_image | absURL }}">
  {{- end }}

  {{ range .Params.categories }}
  <meta property="article:section" content="{{ . }}">
  {{ end }}

  {{ if isset .Params "date" }}
  <meta property="article:published_time" content="{{ (time .Date).Format "2006-01-02T15:04:05Z" }}">
  {{ end }}

  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} &middot; {{ .Site.Title }}{{ end }}"</title>

  {{ $inServerMode := .Site.IsServer }}
  {{ $sass         := resources.Get "scss/style.scss" | resources.ExecuteAsTemplate "scss/style.scss" . }}
  {{ $sassIncludes := (slice "assets/dependencies/" "assets/scss/" "assets/scss/vendors/") }}
  {{ $cssTarget    := "css/styles.css" }}
  {{- $cssOpts := (dict "targetPath" "css/styles.css" "outputStyle" "compressed" "enableSourceMap" "true") -}}
  {{ $css := $sass | toCSS $cssOpts }}

  {{ if or ($inServerMode) (eq hugo.Environment "local") }}
  <link rel="stylesheet" href="{{ $css.Permalink | absURL }}" media="screen">
  {{ else }}
  <link rel="stylesheet" href="{{ $css.Permalink | absURL }}" integrity="{{ $css.Data.Integrity }}" media="screen">
  {{ end }}

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="manifest" href="/site.webmanifest">
</head>
